Relies somewhat on https://github.com/OpenLightingProject/ja-rule
